# SaveGuard 贡献指南

## 目录
- [如何贡献](#如何贡献)
- [开发环境](#开发环境)
- [代码规范](#代码规范)
- [提交流程](#提交流程)
- [问题报告](#问题报告)
- [功能请求](#功能请求)
- [文档贡献](#文档贡献)

## 如何贡献

我们欢迎所有形式的贡献！无论您是开发者、用户还是文档编写者，都可以为SaveGuard项目做出贡献。

### 贡献类型

#### 1. 代码贡献
- 修复bug
- 添加新功能
- 性能优化
- 代码重构

#### 2. 文档贡献
- 完善用户手册
- 更新API文档
- 添加使用示例
- 翻译文档

#### 3. 测试贡献
- 编写单元测试
- 进行集成测试
- 报告bug
- 验证功能

#### 4. 社区贡献
- 回答问题
- 帮助新用户
- 分享使用经验
- 推广项目

## 开发环境

### 环境要求
- **Python**: 3.7+
- **操作系统**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **内存**: 至少 4GB RAM
- **磁盘空间**: 至少 1GB 可用空间

### 环境搭建

#### 1. Fork项目
1. 访问 [SaveGuard GitHub页面](https://github.com/rootwhois/SaveGuard)
2. 点击右上角的"Fork"按钮
3. 将Fork的仓库克隆到本地

```bash
git clone https://github.com/your-username/SaveGuard.git
cd SaveGuard
```

#### 2. 设置上游仓库
```bash
git remote add upstream https://github.com/rootwhois/SaveGuard.git
git fetch upstream
```

#### 3. 创建开发环境
```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt
pip install -r requirements-build.txt
```

#### 4. 验证环境
```bash
# 运行程序
python run.py

# 运行测试
python -m pytest tests/

# 构建程序
python build_all.py --current-only
```

## 代码规范

### Python代码风格

#### 1. 基本规范
- 遵循PEP 8规范
- 使用4个空格缩进
- 行长度不超过120字符
- 使用有意义的变量名和函数名

#### 2. 命名规范
```python
# 类名使用PascalCase
class SaveGuardWidget(QWidget):
    pass

# 函数和变量名使用snake_case
def get_running_programs():
    pass

# 常量使用UPPER_CASE
VERSION = "1.0"
GITHUB_URL = "https://github.com/rootwhois/saveguard"

# 私有方法使用下划线前缀
def _internal_method(self):
    pass
```

#### 3. 注释规范
```python
def process_data(data: List[str], config: Dict) -> bool:
    """
    处理数据并返回结果
    
    Args:
        data: 要处理的数据列表
        config: 配置字典
    
    Returns:
        处理是否成功
    
    Raises:
        ValueError: 当数据格式不正确时
        TypeError: 当参数类型不正确时
    """
    pass
```

#### 4. 类型注解
```python
from typing import List, Dict, Optional, Union

def process_data(
    data: List[str], 
    config: Dict[str, Any],
    timeout: Optional[int] = None
) -> Union[bool, str]:
    """处理数据"""
    pass
```

### 代码组织

#### 1. 导入顺序
```python
# 标准库导入
import os
import sys
from pathlib import Path
from typing import List, Dict

# 第三方库导入
from PyQt5.QtWidgets import QWidget
import psutil

# 本地模块导入
from .language_manager import LanguageManager
from .config import RemindConfig
```

#### 2. 类结构
```python
class ExampleClass:
    """类文档字符串"""
    
    # 类变量
    CLASS_VARIABLE = "value"
    
    def __init__(self, param1: str, param2: int = 0):
        """初始化方法"""
        self.param1 = param1
        self.param2 = param2
    
    def public_method(self) -> str:
        """公共方法"""
        return self._private_method()
    
    def _private_method(self) -> str:
        """私有方法"""
        return f"{self.param1}: {self.param2}"
```

### 测试规范

#### 1. 单元测试
```python
import unittest
from src.saveguard import RemindConfig

class TestRemindConfig(unittest.TestCase):
    """测试RemindConfig类"""
    
    def setUp(self):
        """测试前准备"""
        self.config = RemindConfig()
    
    def test_default_values(self):
        """测试默认值"""
        self.assertEqual(self.config.interval_seconds, 300)
        self.assertTrue(self.config.sound_enabled)
    
    def test_config_serialization(self):
        """测试配置序列化"""
        data = self.config.to_dict()
        self.assertIsInstance(data, dict)
        self.assertIn('interval_seconds', data)
```

#### 2. 集成测试
```python
def test_program_monitoring():
    """测试程序监控功能"""
    # 启动监控线程
    monitor = ProgramMonitorThread(['notepad.exe'])
    monitor.start()
    
    # 模拟程序启动
    # 验证监控结果
    
    # 清理资源
    monitor.stop()
```

## 提交流程

### 1. 创建分支
```bash
# 确保主分支是最新的
git checkout main
git pull upstream main

# 创建功能分支
git checkout -b feature/your-feature-name

# 或创建修复分支
git checkout -b fix/issue-number
```

### 2. 开发代码
```bash
# 进行代码修改
# 添加测试
# 更新文档

# 添加更改
git add .

# 提交更改
git commit -m "feat: 添加新功能描述"
```

### 3. 提交规范
使用约定式提交格式：

```
<类型>[可选范围]: <描述>

[可选正文]

[可选脚注]
```

**类型**:
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

**示例**:
```bash
git commit -m "feat: 添加整点提醒功能"
git commit -m "fix: 修复程序监控线程内存泄漏"
git commit -m "docs: 更新用户手册"
```

### 4. 推送分支
```bash
git push origin feature/your-feature-name
```

### 5. 创建Pull Request
1. 访问GitHub页面
2. 点击"Compare & pull request"
3. 填写PR描述
4. 等待代码审查

### 6. 代码审查
- 响应审查意见
- 进行必要的修改
- 保持PR更新

## 问题报告

### 报告Bug

#### 1. 检查现有问题
在创建新Issue之前，请先搜索现有的Issues，确认问题未被报告过。

#### 2. 创建Issue
访问 [GitHub Issues页面](https://github.com/rootwhois/SaveGuard/issues) 创建新Issue。

#### 3. 提供信息
**必需信息**:
- 操作系统版本
- SaveGuard版本
- 复现步骤
- 预期行为
- 实际行为
- 错误日志

**可选信息**:
- 截图或录屏
- 系统配置信息
- 相关软件版本

#### 4. Issue模板
```markdown
## Bug描述
简要描述bug

## 复现步骤
1. 打开程序
2. 执行操作
3. 观察结果

## 预期行为
描述期望的行为

## 实际行为
描述实际发生的行为

## 环境信息
- 操作系统: Windows 10
- SaveGuard版本: 1.0
- Python版本: 3.9.7

## 错误日志
```
错误信息
```

## 截图
如果有截图，请添加
```

### 报告安全漏洞

如果发现安全漏洞，请通过以下方式报告：
1. 发送邮件到安全邮箱
2. 不要公开讨论安全问题
3. 等待安全团队响应

## 功能请求

### 提出功能请求

#### 1. 检查现有请求
在创建新请求之前，请先搜索现有的功能请求。

#### 2. 创建Issue
使用"Feature Request"标签创建Issue。

#### 3. 提供详细信息
- 功能描述
- 使用场景
- 预期效果
- 实现建议
- 优先级

#### 4. 功能请求模板
```markdown
## 功能描述
简要描述请求的功能

## 使用场景
描述在什么情况下需要这个功能

## 预期效果
描述功能实现后的效果

## 实现建议
如果有实现建议，请提供

## 优先级
- [ ] 高
- [ ] 中
- [ ] 低

## 其他信息
任何其他相关信息
```

## 文档贡献

### 文档类型

#### 1. 用户文档
- 用户手册
- 常见问题
- 使用教程
- 视频教程

#### 2. 开发者文档
- API参考
- 开发者指南
- 架构文档
- 设计文档

#### 3. 多语言文档
- 翻译现有文档
- 本地化内容
- 文化适配

### 文档规范

#### 1. 格式规范
- 使用Markdown格式
- 遵循统一的文档结构
- 使用清晰的标题层级
- 添加目录和导航

#### 2. 内容规范
- 使用简洁明了的语言
- 提供完整的示例
- 保持信息准确性
- 定期更新内容

#### 3. 图片规范
- 使用清晰的截图
- 保持一致的样式
- 添加适当的说明
- 优化文件大小

### 翻译指南

#### 1. 翻译原则
- 保持原意准确
- 使用本地化表达
- 保持术语一致
- 考虑文化差异

#### 2. 翻译流程
1. 选择要翻译的文档
2. 创建翻译分支
3. 进行翻译工作
4. 提交翻译结果
5. 等待审查

## 社区参与

### 参与讨论

#### 1. GitHub Discussions
- 技术讨论
- 使用交流
- 功能建议
- 问题解答

#### 2. 代码审查
- 审查Pull Request
- 提供改进建议
- 分享最佳实践
- 学习他人代码

#### 3. 问题解答
- 回答用户问题
- 分享使用经验
- 提供解决方案
- 帮助新用户

### 推广项目

#### 1. 社交媒体
- 分享项目信息
- 发布使用教程
- 展示项目成果
- 参与相关讨论

#### 2. 技术社区
- 在技术论坛分享
- 撰写技术博客
- 参与开源活动
- 建立技术影响力

## 贡献者认可

### 贡献者类型
- **核心贡献者**: 长期参与项目开发
- **代码贡献者**: 提交代码和修复
- **文档贡献者**: 完善文档和翻译
- **社区贡献者**: 回答问题和支持用户

### 认可方式
- 在README中列出贡献者
- 在发布说明中感谢贡献者
- 提供贡献者徽章
- 邀请参与项目决策

## 联系方式

### 获取帮助
- **GitHub Issues**: 报告问题和功能请求
- **GitHub Discussions**: 技术讨论和问题解答
- **邮件**: 通过GitHub联系

### 参与讨论
- **技术讨论**: GitHub Discussions
- **代码审查**: Pull Request评论
- **问题解答**: Issues评论

---

**感谢您的贡献！** 每一个贡献都让SaveGuard变得更好。如果您有任何问题，请随时联系我们。
